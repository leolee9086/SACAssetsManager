"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _debug = _interopRequireDefault(require("debug"));
var _lodash = _interopRequireDefault(require("lodash"));
var _auth = require("@verdaccio/auth");
var _config = require("@verdaccio/config");
var _signature = require("@verdaccio/signature");
var _utils = require("@verdaccio/utils");
var _pluginLoader = _interopRequireDefault(require("../lib/plugin-loader"));
var _authUtils = require("./auth-utils");
var _constants = require("./constants");
var _logger = require("./logger");
var _utils2 = require("./utils");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == typeof i ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != typeof i) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
const debug = (0, _debug.default)('verdaccio:auth');
class Auth {
  constructor(config) {
    _defineProperty(this, "config", void 0);
    _defineProperty(this, "logger", void 0);
    _defineProperty(this, "secret", void 0);
    _defineProperty(this, "plugins", void 0);
    this.config = config;
    this.logger = _logger.logger;
    this.secret = config.secret;
    this.plugins = this._loadPlugin(config);
    this._applyDefaultPlugins();
  }
  _loadPlugin(config) {
    const pluginOptions = {
      config,
      logger: this.logger
    };
    let authConf = _objectSpread({}, config.auth);
    if (authConf !== null && authConf !== void 0 && authConf.htpasswd) {
      // special case for htpasswd plugin, the v6 version uses bcrypt by default
      // 6.x enforces crypt to avoid breaking changes, but is highly recommended using
      // bcrypt instead.
      if (!authConf.htpasswd.algorithm) {
        authConf.htpasswd.algorithm = 'crypt';
        this.logger.info(
        // eslint-disable-next-line max-len
        'the "crypt" algorithm is deprecated consider switch to "bcrypt" in the configuration file. Read the documentation for additional details');
      }
    }
    return (0, _pluginLoader.default)(config, authConf, pluginOptions, plugin => {
      const {
        authenticate,
        allow_access,
        allow_publish
      } = plugin;
      // @ts-ignore
      return authenticate || allow_access || allow_publish;
    });
  }
  _applyDefaultPlugins() {
    this.plugins.push((0, _authUtils.getDefaultPlugins)(this.logger));
  }
  changePassword(username, password,
  // pragma: allowlist secret
  newPassword,
  // pragma: allowlist secret
  cb) {
    const validPlugins = _lodash.default.filter(this.plugins, plugin => _lodash.default.isFunction(plugin.changePassword));
    if (_lodash.default.isEmpty(validPlugins)) {
      return cb(_utils2.ErrorCode.getInternalError(_constants.SUPPORT_ERRORS.PLUGIN_MISSING_INTERFACE));
    }
    for (const plugin of validPlugins) {
      if (_lodash.default.isNil(plugin) || _lodash.default.isFunction(plugin.changePassword) === false) {
        debug('auth plugin does not implement changePassword, trying next one');
        continue;
      } else {
        debug('updating password for %o', username);
        plugin.changePassword(username, password, newPassword, (err, profile) => {
          if (err) {
            this.logger.error({
              username,
              err
            }, `An error has been produced
            updating the password for @{username}. Error: @{err.message}`);
            return cb(err);
          }
          this.logger.info({
            username
          }, 'updated password for @{username} was successful');
          return cb(null, profile);
        });
      }
    }
  }
  authenticate(username, password, cb) {
    const plugins = this.plugins.slice(0);
    const self = this;
    (function next() {
      const plugin = plugins.shift();
      if (_lodash.default.isFunction(plugin.authenticate) === false) {
        return next();
      }
      debug('authenticating %o', username);
      plugin.authenticate(username, password, function (err, groups) {
        if (err) {
          self.logger.error({
            username,
            err
          }, 'authenticating for user @{username} failed. Error: @{err.message}');
          return cb(err);
        }

        // Expect: SKIP if groups is falsey and not an array
        //         with at least one item (truthy length)
        // Expect: CONTINUE otherwise (will error if groups is not
        //         an array, but this is current behavior)
        // Caveat: STRING (if valid) will pass successfully
        //         bug give unexpected results
        // Info: Cannot use `== false to check falsey values`
        if (!!groups && groups.length !== 0) {
          // TODO: create a better understanding of expectations
          if (_lodash.default.isString(groups)) {
            throw new TypeError('plugin group error: invalid type for function');
          }
          const isGroupValid = _lodash.default.isArray(groups);
          if (!isGroupValid) {
            throw new TypeError(_constants.API_ERROR.BAD_FORMAT_USER_GROUP);
          }
          debug('authentication for user %o was successfully. Groups: %o', username, groups);
          return cb(err, (0, _config.createRemoteUser)(username, groups));
        }
        next();
      });
    })();
  }
  add_user(user, password, cb) {
    const self = this;
    const plugins = this.plugins.slice(0);
    debug('add user %o', user);
    (function next() {
      const plugin = plugins.shift();
      let method = 'adduser';
      if (_lodash.default.isFunction(plugin[method]) === false) {
        method = 'add_user';
        self.logger.warn('the plugin method add_user in the auth plugin is deprecated and will be removed in next major release, notify to the plugin author');
      }
      if (_lodash.default.isFunction(plugin[method]) === false) {
        next();
      } else {
        // p.add_user() execution
        plugin[method](user, password, function (err, ok) {
          if (err) {
            self.logger.error({
              user,
              err: err.message
            }, 'the user @{user} could not being added. Error: @{err}');
            return cb(err);
          }
          if (ok) {
            self.logger.info({
              user
            }, 'the user @{user} has been added');
            return self.authenticate(user, password, cb);
          }
          next();
        });
      }
    })();
  }

  /**
   * Allow user to access a package.
   */
  allow_access({
    packageName,
    packageVersion
  }, user, callback) {
    const plugins = this.plugins.slice(0);
    const self = this;
    const pkgAllowAcces = {
      name: packageName,
      version: packageVersion
    };
    const pkg = Object.assign({}, pkgAllowAcces, (0, _utils.getMatchedPackagesSpec)(packageName, this.config.packages));
    debug('allow access for %o', packageName);
    (function next() {
      const plugin = plugins.shift();
      if (_lodash.default.isNil(plugin) || _lodash.default.isFunction(plugin.allow_access) === false) {
        return next();
      }
      plugin.allow_access(user, pkg, function (err, ok) {
        if (err) {
          self.logger.error({
            packageName,
            err
          }, 'forbidden access for @{packageName}. Error: @{err.message}');
          return callback(err);
        }
        if (ok) {
          self.logger.info({
            packageName
          }, 'allowed access for @{packageName}');
          return callback(null, ok);
        }
        next(); // cb(null, false) causes next plugin to roll
      });
    })();
  }
  allow_unpublish({
    packageName,
    packageVersion
  }, user, callback) {
    const pkg = Object.assign({
      name: packageName,
      version: packageVersion
    }, (0, _utils.getMatchedPackagesSpec)(packageName, this.config.packages));
    debug('allow unpublish for %o', packageName);
    for (const plugin of this.plugins) {
      if (_lodash.default.isNil(plugin) || _lodash.default.isFunction(plugin.allow_unpublish) === false) {
        debug('allow unpublish for %o plugin does not implement allow_unpublish', packageName);
        continue;
      } else {
        // @ts-ignore
        plugin.allow_unpublish(user, pkg, (err, ok) => {
          if (err) {
            this.logger.error({
              packageName,
              user: user === null || user === void 0 ? void 0 : user.name
            }, '@{user} forbidden publish for @{packageName}, it will fallback on unpublish permissions');
            return callback(err);
          }
          if (_lodash.default.isNil(ok) === true) {
            debug('we bypass unpublish for %o, publish will handle the access', packageName);
            // @ts-ignore
            // eslint-disable-next-line
            return this.allow_publish(...arguments);
          }
          if (ok) {
            this.logger.info({
              packageName,
              user: user === null || user === void 0 ? void 0 : user.name
            }, '@{user} allowed unpublish for @{packageName}');
            return callback(null, ok);
          }
        });
      }
    }
  }

  /**
   * Allow user to publish a package.
   */
  allow_publish({
    packageName,
    packageVersion
  }, user, callback) {
    const plugins = this.plugins.slice(0);
    const self = this;
    const pkg = Object.assign({
      name: packageName,
      version: packageVersion
    }, (0, _utils.getMatchedPackagesSpec)(packageName, this.config.packages));
    debug('allow publish for %o init | plugins: %o', packageName, plugins === null || plugins === void 0 ? void 0 : plugins.length);
    (function next() {
      const plugin = plugins.shift();
      if (_lodash.default.isNil(plugin) || _lodash.default.isFunction(plugin.allow_publish) === false) {
        debug('allow publish for %o plugin does not implement allow_publish', packageName);
        return next();
      }

      // @ts-ignore
      plugin.allow_publish(user, pkg, (err, ok) => {
        if (_lodash.default.isNil(err) === false && _lodash.default.isError(err)) {
          self.logger.error({
            packageName,
            user: user === null || user === void 0 ? void 0 : user.name
          }, '@{user} is forbidden publish for @{packageName}');
          return callback(err);
        }
        if (ok) {
          self.logger.info({
            packageName,
            user: user === null || user === void 0 ? void 0 : user.name
          }, '@{user} is allowed publish for @{packageName}');
          return callback(null, ok);
        }
        debug('allow publish skip validation for %o', packageName);
        next(); // cb(null, false) causes next plugin to roll
      });
    })();
  }
  apiJWTmiddleware() {
    const plugins = this.plugins.slice(0);
    const helpers = {
      createAnonymousRemoteUser: _config.createAnonymousRemoteUser,
      createRemoteUser: _config.createRemoteUser
    };
    for (const plugin of plugins) {
      if (plugin.apiJWTmiddleware) {
        return plugin.apiJWTmiddleware(helpers);
      }
    }
    return (req, res, _next) => {
      req.pause();
      const next = function (err) {
        req.resume();
        // uncomment this to reject users with bad auth headers
        // return _next.apply(null, arguments)
        // swallow error, user remains unauthorized
        // set remoteUserError to indicate that user was attempting authentication
        if (err) {
          req.remote_user.error = err.message;
        }
        return _next();
      };
      if (this._isRemoteUserValid(req.remote_user)) {
        // @ts-ignore
        return next();
      }

      // in case auth header does not exist we return anonymous function
      req.remote_user = (0, _config.createAnonymousRemoteUser)();
      const {
        authorization
      } = req.headers;
      if (_lodash.default.isNil(authorization)) {
        // @ts-ignore
        return next();
      }
      if (!(0, _auth.isAuthHeaderValid)(authorization)) {
        debug('api middleware auth heather is not valid');
        return next(_utils2.ErrorCode.getBadRequest(_constants.API_ERROR.BAD_AUTH_HEADER));
      }
      const security = (0, _authUtils.getSecurity)(this.config);
      const {
        secret
      } = this.config;
      if ((0, _auth.isAESLegacy)(security)) {
        debug('api middleware using legacy auth token');
        this._handleAESMiddleware(req, security, secret, authorization, next);
      } else {
        debug('api middleware using JWT auth token');
        this._handleJWTAPIMiddleware(req, security, secret, authorization, next);
      }
    };
  }
  _handleJWTAPIMiddleware(req, security, secret, authorization, next) {
    const {
      scheme,
      token
    } = (0, _auth.parseAuthTokenHeader)(authorization);
    if (scheme.toUpperCase() === _constants.TOKEN_BASIC.toUpperCase()) {
      // this should happen when client tries to login with an existing user
      const credentials = (0, _utils2.convertPayloadToBase64)(token).toString();
      const {
        user,
        password
      } = (0, _signature.parseBasicPayload)(credentials);
      this.authenticate(user, password, (err, user) => {
        if (!err) {
          req.remote_user = user;
          next();
        } else {
          req.remote_user = (0, _config.createAnonymousRemoteUser)();
          next(err);
        }
      });
    } else {
      // jwt handler
      const credentials = (0, _auth.getMiddlewareCredentials)(security, secret, authorization);
      if (credentials) {
        // if the signature is valid we rely on it
        req.remote_user = credentials;
        next();
      } else {
        // with JWT throw 401
        next(_utils2.ErrorCode.getForbidden(_constants.API_ERROR.BAD_USERNAME_PASSWORD));
      }
    }
  }
  _handleAESMiddleware(req, security, secret, authorization, next) {
    const credentials = (0, _auth.getMiddlewareCredentials)(security, secret, authorization);
    if (credentials) {
      const {
        user,
        password
      } = credentials;
      this.authenticate(user, password, (err, user) => {
        if (!err) {
          req.remote_user = user;
          next();
        } else {
          req.remote_user = (0, _config.createAnonymousRemoteUser)();
          next(err);
        }
      });
    } else {
      // we force npm client to ask again with basic authentication
      return next(_utils2.ErrorCode.getBadRequest(_constants.API_ERROR.BAD_AUTH_HEADER));
    }
  }
  _isRemoteUserValid(remote_user) {
    return _lodash.default.isUndefined(remote_user) === false && _lodash.default.isUndefined(remote_user.name) === false;
  }

  /**
   * JWT middleware for WebUI
   */
  webUIJWTmiddleware() {
    return (req, res, _next) => {
      if (this._isRemoteUserValid(req.remote_user)) {
        return _next();
      }
      req.pause();
      const next = err => {
        req.resume();
        if (err) {
          // req.remote_user.error = err.message;
          res.status(err.statusCode).send(err.message);
        }
        return _next();
      };
      const {
        authorization
      } = req.headers;
      if (_lodash.default.isNil(authorization)) {
        // @ts-ignore
        return next();
      }
      if (!(0, _auth.isAuthHeaderValid)(authorization)) {
        return next(_utils2.ErrorCode.getBadRequest(_constants.API_ERROR.BAD_AUTH_HEADER));
      }
      const token = (authorization || '').replace(`${_constants.TOKEN_BEARER} `, '');
      if (!token) {
        // @ts-ignore
        return next();
      }
      let credentials;
      try {
        credentials = (0, _auth.verifyJWTPayload)(token, this.config.secret);
      } catch (err) {
        // FIXME: intended behaviour, do we want it?
      }
      if (this._isRemoteUserValid(credentials)) {
        const {
          name,
          groups
        } = credentials;
        req.remote_user = (0, _config.createRemoteUser)(name, groups);
      } else {
        req.remote_user = (0, _config.createAnonymousRemoteUser)();
      }
      // @ts-ignore
      next();
    };
  }
  async jwtEncrypt(user, signOptions) {
    const {
      real_groups,
      name,
      groups
    } = user;
    const realGroupsValidated = _lodash.default.isNil(real_groups) ? [] : real_groups;
    const groupedGroups = _lodash.default.isNil(groups) ? real_groups : Array.from(new Set([...groups.concat(realGroupsValidated)]));
    const payload = {
      real_groups: realGroupsValidated,
      name,
      groups: groupedGroups
    };

    // TODO: fix on update signature package
    const token = await (0, _signature.signPayload)(payload, this.secret, signOptions);
    return token;
  }

  /**
   * Encrypt a string.
   */
  aesEncrypt(value) {
    if (this.secret.length === _signature.utils.TOKEN_VALID_LENGTH) {
      debug('signing with enhanced aes legacy');
      const token = (0, _signature.aesEncrypt)(value, this.secret);
      return token;
    } else {
      debug('signing with enhanced aes deprecated legacy');
      // deprecated aes (legacy) signature, only must be used for legacy version
      const token = (0, _signature.aesEncryptDeprecated)(Buffer.from(value), this.secret).toString('base64');
      return token;
    }
  }
}
var _default = exports.default = Auth;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZGVidWciLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9sb2Rhc2giLCJfYXV0aCIsIl9jb25maWciLCJfc2lnbmF0dXJlIiwiX3V0aWxzIiwiX3BsdWdpbkxvYWRlciIsIl9hdXRoVXRpbHMiLCJfY29uc3RhbnRzIiwiX2xvZ2dlciIsIl91dGlsczIiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJvd25LZXlzIiwiciIsInQiLCJPYmplY3QiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibyIsImZpbHRlciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVmaW5lUHJvcGVydHkiLCJfdG9Qcm9wZXJ0eUtleSIsInZhbHVlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJpIiwiX3RvUHJpbWl0aXZlIiwiU3ltYm9sIiwidG9QcmltaXRpdmUiLCJjYWxsIiwiVHlwZUVycm9yIiwiU3RyaW5nIiwiTnVtYmVyIiwiZGVidWciLCJidWlsZERlYnVnIiwiQXV0aCIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwibG9nZ2VyIiwic2VjcmV0IiwicGx1Z2lucyIsIl9sb2FkUGx1Z2luIiwiX2FwcGx5RGVmYXVsdFBsdWdpbnMiLCJwbHVnaW5PcHRpb25zIiwiYXV0aENvbmYiLCJhdXRoIiwiaHRwYXNzd2QiLCJhbGdvcml0aG0iLCJpbmZvIiwibG9hZFBsdWdpbiIsInBsdWdpbiIsImF1dGhlbnRpY2F0ZSIsImFsbG93X2FjY2VzcyIsImFsbG93X3B1Ymxpc2giLCJnZXREZWZhdWx0UGx1Z2lucyIsImNoYW5nZVBhc3N3b3JkIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsIm5ld1Bhc3N3b3JkIiwiY2IiLCJ2YWxpZFBsdWdpbnMiLCJfIiwiaXNGdW5jdGlvbiIsImlzRW1wdHkiLCJFcnJvckNvZGUiLCJnZXRJbnRlcm5hbEVycm9yIiwiU1VQUE9SVF9FUlJPUlMiLCJQTFVHSU5fTUlTU0lOR19JTlRFUkZBQ0UiLCJpc05pbCIsImVyciIsInByb2ZpbGUiLCJlcnJvciIsInNsaWNlIiwic2VsZiIsIm5leHQiLCJzaGlmdCIsImdyb3VwcyIsImlzU3RyaW5nIiwiaXNHcm91cFZhbGlkIiwiaXNBcnJheSIsIkFQSV9FUlJPUiIsIkJBRF9GT1JNQVRfVVNFUl9HUk9VUCIsImNyZWF0ZVJlbW90ZVVzZXIiLCJhZGRfdXNlciIsInVzZXIiLCJtZXRob2QiLCJ3YXJuIiwib2siLCJtZXNzYWdlIiwicGFja2FnZU5hbWUiLCJwYWNrYWdlVmVyc2lvbiIsImNhbGxiYWNrIiwicGtnQWxsb3dBY2NlcyIsIm5hbWUiLCJ2ZXJzaW9uIiwicGtnIiwiYXNzaWduIiwiZ2V0TWF0Y2hlZFBhY2thZ2VzU3BlYyIsInBhY2thZ2VzIiwiYWxsb3dfdW5wdWJsaXNoIiwiaXNFcnJvciIsImFwaUpXVG1pZGRsZXdhcmUiLCJoZWxwZXJzIiwiY3JlYXRlQW5vbnltb3VzUmVtb3RlVXNlciIsInJlcSIsInJlcyIsIl9uZXh0IiwicGF1c2UiLCJyZXN1bWUiLCJyZW1vdGVfdXNlciIsIl9pc1JlbW90ZVVzZXJWYWxpZCIsImF1dGhvcml6YXRpb24iLCJoZWFkZXJzIiwiaXNBdXRoSGVhZGVyVmFsaWQiLCJnZXRCYWRSZXF1ZXN0IiwiQkFEX0FVVEhfSEVBREVSIiwic2VjdXJpdHkiLCJnZXRTZWN1cml0eSIsImlzQUVTTGVnYWN5IiwiX2hhbmRsZUFFU01pZGRsZXdhcmUiLCJfaGFuZGxlSldUQVBJTWlkZGxld2FyZSIsInNjaGVtZSIsInRva2VuIiwicGFyc2VBdXRoVG9rZW5IZWFkZXIiLCJ0b1VwcGVyQ2FzZSIsIlRPS0VOX0JBU0lDIiwiY3JlZGVudGlhbHMiLCJjb252ZXJ0UGF5bG9hZFRvQmFzZTY0IiwidG9TdHJpbmciLCJwYXJzZUJhc2ljUGF5bG9hZCIsImdldE1pZGRsZXdhcmVDcmVkZW50aWFscyIsImdldEZvcmJpZGRlbiIsIkJBRF9VU0VSTkFNRV9QQVNTV09SRCIsImlzVW5kZWZpbmVkIiwid2ViVUlKV1RtaWRkbGV3YXJlIiwic3RhdHVzIiwic3RhdHVzQ29kZSIsInNlbmQiLCJyZXBsYWNlIiwiVE9LRU5fQkVBUkVSIiwidmVyaWZ5SldUUGF5bG9hZCIsImp3dEVuY3J5cHQiLCJzaWduT3B0aW9ucyIsInJlYWxfZ3JvdXBzIiwicmVhbEdyb3Vwc1ZhbGlkYXRlZCIsImdyb3VwZWRHcm91cHMiLCJBcnJheSIsImZyb20iLCJTZXQiLCJjb25jYXQiLCJwYXlsb2FkIiwic2lnblBheWxvYWQiLCJhZXNFbmNyeXB0Iiwic2lnbmF0dXJlVXRpbHMiLCJUT0tFTl9WQUxJRF9MRU5HVEgiLCJhZXNFbmNyeXB0RGVwcmVjYXRlZCIsIkJ1ZmZlciIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvYXV0aC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYnVpbGREZWJ1ZyBmcm9tICdkZWJ1Zyc7XG5pbXBvcnQgeyBOZXh0RnVuY3Rpb24gfSBmcm9tICdleHByZXNzJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gIGdldE1pZGRsZXdhcmVDcmVkZW50aWFscyxcbiAgaXNBRVNMZWdhY3ksXG4gIGlzQXV0aEhlYWRlclZhbGlkLFxuICBwYXJzZUF1dGhUb2tlbkhlYWRlcixcbiAgdmVyaWZ5SldUUGF5bG9hZCxcbn0gZnJvbSAnQHZlcmRhY2Npby9hdXRoJztcbmltcG9ydCB7IGNyZWF0ZUFub255bW91c1JlbW90ZVVzZXIsIGNyZWF0ZVJlbW90ZVVzZXIgfSBmcm9tICdAdmVyZGFjY2lvL2NvbmZpZyc7XG5pbXBvcnQgeyBWZXJkYWNjaW9FcnJvciwgcGx1Z2luVXRpbHMgfSBmcm9tICdAdmVyZGFjY2lvL2NvcmUnO1xuaW1wb3J0IHtcbiAgYWVzRW5jcnlwdCxcbiAgYWVzRW5jcnlwdERlcHJlY2F0ZWQsXG4gIHBhcnNlQmFzaWNQYXlsb2FkLFxuICBzaWduUGF5bG9hZCxcbiAgdXRpbHMgYXMgc2lnbmF0dXJlVXRpbHMsXG59IGZyb20gJ0B2ZXJkYWNjaW8vc2lnbmF0dXJlJztcbmltcG9ydCB7XG4gIEFsbG93QWNjZXNzLFxuICBDYWxsYmFjayxcbiAgQ29uZmlnLFxuICBKV1RTaWduT3B0aW9ucyxcbiAgTG9nZ2VyLFxuICBQYWNrYWdlQWNjZXNzLFxuICBSZW1vdGVVc2VyLFxuICBTZWN1cml0eSxcbn0gZnJvbSAnQHZlcmRhY2Npby90eXBlcyc7XG5pbXBvcnQgeyBnZXRNYXRjaGVkUGFja2FnZXNTcGVjIH0gZnJvbSAnQHZlcmRhY2Npby91dGlscyc7XG5cbmltcG9ydCBsb2FkUGx1Z2luIGZyb20gJy4uL2xpYi9wbHVnaW4tbG9hZGVyJztcbmltcG9ydCB7ICRSZXF1ZXN0RXh0ZW5kLCAkUmVzcG9uc2VFeHRlbmQsIEFFU1BheWxvYWQgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBnZXREZWZhdWx0UGx1Z2lucywgZ2V0U2VjdXJpdHkgfSBmcm9tICcuL2F1dGgtdXRpbHMnO1xuaW1wb3J0IHsgQVBJX0VSUk9SLCBTVVBQT1JUX0VSUk9SUywgVE9LRU5fQkFTSUMsIFRPS0VOX0JFQVJFUiB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vbG9nZ2VyJztcbmltcG9ydCB7IEVycm9yQ29kZSwgY29udmVydFBheWxvYWRUb0Jhc2U2NCB9IGZyb20gJy4vdXRpbHMnO1xuXG5jb25zdCBkZWJ1ZyA9IGJ1aWxkRGVidWcoJ3ZlcmRhY2NpbzphdXRoJyk7XG5cbmNsYXNzIEF1dGgge1xuICBwdWJsaWMgY29uZmlnOiBDb25maWc7XG4gIHB1YmxpYyBsb2dnZXI6IExvZ2dlcjtcbiAgcHVibGljIHNlY3JldDogc3RyaW5nO1xuICBwdWJsaWMgcGx1Z2luczogcGx1Z2luVXRpbHMuQXV0aDxDb25maWc+W107XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKGNvbmZpZzogQ29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XG4gICAgdGhpcy5zZWNyZXQgPSBjb25maWcuc2VjcmV0O1xuICAgIHRoaXMucGx1Z2lucyA9IHRoaXMuX2xvYWRQbHVnaW4oY29uZmlnKTtcbiAgICB0aGlzLl9hcHBseURlZmF1bHRQbHVnaW5zKCk7XG4gIH1cblxuICBwcml2YXRlIF9sb2FkUGx1Z2luKGNvbmZpZzogQ29uZmlnKTogcGx1Z2luVXRpbHMuQXV0aDxDb25maWc+W10ge1xuICAgIGNvbnN0IHBsdWdpbk9wdGlvbnMgPSB7XG4gICAgICBjb25maWcsXG4gICAgICBsb2dnZXI6IHRoaXMubG9nZ2VyLFxuICAgIH07XG5cbiAgICBsZXQgYXV0aENvbmYgPSB7IC4uLmNvbmZpZy5hdXRoIH07XG4gICAgaWYgKGF1dGhDb25mPy5odHBhc3N3ZCkge1xuICAgICAgLy8gc3BlY2lhbCBjYXNlIGZvciBodHBhc3N3ZCBwbHVnaW4sIHRoZSB2NiB2ZXJzaW9uIHVzZXMgYmNyeXB0IGJ5IGRlZmF1bHRcbiAgICAgIC8vIDYueCBlbmZvcmNlcyBjcnlwdCB0byBhdm9pZCBicmVha2luZyBjaGFuZ2VzLCBidXQgaXMgaGlnaGx5IHJlY29tbWVuZGVkIHVzaW5nXG4gICAgICAvLyBiY3J5cHQgaW5zdGVhZC5cbiAgICAgIGlmICghYXV0aENvbmYuaHRwYXNzd2QuYWxnb3JpdGhtKSB7XG4gICAgICAgIGF1dGhDb25mLmh0cGFzc3dkLmFsZ29yaXRobSA9ICdjcnlwdCc7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgICAgICAgICAndGhlIFwiY3J5cHRcIiBhbGdvcml0aG0gaXMgZGVwcmVjYXRlZCBjb25zaWRlciBzd2l0Y2ggdG8gXCJiY3J5cHRcIiBpbiB0aGUgY29uZmlndXJhdGlvbiBmaWxlLiBSZWFkIHRoZSBkb2N1bWVudGF0aW9uIGZvciBhZGRpdGlvbmFsIGRldGFpbHMnXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxvYWRQbHVnaW48cGx1Z2luVXRpbHMuQXV0aDxDb25maWc+PihcbiAgICAgIGNvbmZpZyxcbiAgICAgIGF1dGhDb25mLFxuICAgICAgcGx1Z2luT3B0aW9ucyxcbiAgICAgIChwbHVnaW46IHBsdWdpblV0aWxzLkF1dGg8Q29uZmlnPik6IGJvb2xlYW4gPT4ge1xuICAgICAgICBjb25zdCB7IGF1dGhlbnRpY2F0ZSwgYWxsb3dfYWNjZXNzLCBhbGxvd19wdWJsaXNoIH0gPSBwbHVnaW47XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcmV0dXJuIGF1dGhlbnRpY2F0ZSB8fCBhbGxvd19hY2Nlc3MgfHwgYWxsb3dfcHVibGlzaDtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBfYXBwbHlEZWZhdWx0UGx1Z2lucygpOiB2b2lkIHtcbiAgICB0aGlzLnBsdWdpbnMucHVzaChnZXREZWZhdWx0UGx1Z2lucyh0aGlzLmxvZ2dlcikpO1xuICB9XG5cbiAgcHVibGljIGNoYW5nZVBhc3N3b3JkKFxuICAgIHVzZXJuYW1lOiBzdHJpbmcsXG4gICAgcGFzc3dvcmQ6IHN0cmluZywgLy8gcHJhZ21hOiBhbGxvd2xpc3Qgc2VjcmV0XG4gICAgbmV3UGFzc3dvcmQ6IHN0cmluZywgLy8gcHJhZ21hOiBhbGxvd2xpc3Qgc2VjcmV0XG4gICAgY2I6IENhbGxiYWNrXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHZhbGlkUGx1Z2lucyA9IF8uZmlsdGVyKHRoaXMucGx1Z2lucywgKHBsdWdpbikgPT4gXy5pc0Z1bmN0aW9uKHBsdWdpbi5jaGFuZ2VQYXNzd29yZCkpO1xuXG4gICAgaWYgKF8uaXNFbXB0eSh2YWxpZFBsdWdpbnMpKSB7XG4gICAgICByZXR1cm4gY2IoRXJyb3JDb2RlLmdldEludGVybmFsRXJyb3IoU1VQUE9SVF9FUlJPUlMuUExVR0lOX01JU1NJTkdfSU5URVJGQUNFKSk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBwbHVnaW4gb2YgdmFsaWRQbHVnaW5zKSB7XG4gICAgICBpZiAoXy5pc05pbChwbHVnaW4pIHx8IF8uaXNGdW5jdGlvbihwbHVnaW4uY2hhbmdlUGFzc3dvcmQpID09PSBmYWxzZSkge1xuICAgICAgICBkZWJ1ZygnYXV0aCBwbHVnaW4gZG9lcyBub3QgaW1wbGVtZW50IGNoYW5nZVBhc3N3b3JkLCB0cnlpbmcgbmV4dCBvbmUnKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1ZygndXBkYXRpbmcgcGFzc3dvcmQgZm9yICVvJywgdXNlcm5hbWUpO1xuICAgICAgICBwbHVnaW4uY2hhbmdlUGFzc3dvcmQhKHVzZXJuYW1lLCBwYXNzd29yZCwgbmV3UGFzc3dvcmQsIChlcnIsIHByb2ZpbGUpOiB2b2lkID0+IHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcbiAgICAgICAgICAgICAgeyB1c2VybmFtZSwgZXJyIH0sXG4gICAgICAgICAgICAgIGBBbiBlcnJvciBoYXMgYmVlbiBwcm9kdWNlZFxuICAgICAgICAgICAgdXBkYXRpbmcgdGhlIHBhc3N3b3JkIGZvciBAe3VzZXJuYW1lfS4gRXJyb3I6IEB7ZXJyLm1lc3NhZ2V9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBjYihlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKHsgdXNlcm5hbWUgfSwgJ3VwZGF0ZWQgcGFzc3dvcmQgZm9yIEB7dXNlcm5hbWV9IHdhcyBzdWNjZXNzZnVsJyk7XG4gICAgICAgICAgcmV0dXJuIGNiKG51bGwsIHByb2ZpbGUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXV0aGVudGljYXRlKHVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcsIGNiOiBDYWxsYmFjayk6IHZvaWQge1xuICAgIGNvbnN0IHBsdWdpbnMgPSB0aGlzLnBsdWdpbnMuc2xpY2UoMCk7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgKGZ1bmN0aW9uIG5leHQoKTogdm9pZCB7XG4gICAgICBjb25zdCBwbHVnaW4gPSBwbHVnaW5zLnNoaWZ0KCkgYXMgcGx1Z2luVXRpbHMuQXV0aDxDb25maWc+O1xuICAgICAgaWYgKF8uaXNGdW5jdGlvbihwbHVnaW4uYXV0aGVudGljYXRlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICAgIH1cbiAgICAgIGRlYnVnKCdhdXRoZW50aWNhdGluZyAlbycsIHVzZXJuYW1lKTtcbiAgICAgIHBsdWdpbi5hdXRoZW50aWNhdGUodXNlcm5hbWUsIHBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyLCBncm91cHMpOiB2b2lkIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHNlbGYubG9nZ2VyLmVycm9yKFxuICAgICAgICAgICAgeyB1c2VybmFtZSwgZXJyIH0sXG4gICAgICAgICAgICAnYXV0aGVudGljYXRpbmcgZm9yIHVzZXIgQHt1c2VybmFtZX0gZmFpbGVkLiBFcnJvcjogQHtlcnIubWVzc2FnZX0nXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gY2IoZXJyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV4cGVjdDogU0tJUCBpZiBncm91cHMgaXMgZmFsc2V5IGFuZCBub3QgYW4gYXJyYXlcbiAgICAgICAgLy8gICAgICAgICB3aXRoIGF0IGxlYXN0IG9uZSBpdGVtICh0cnV0aHkgbGVuZ3RoKVxuICAgICAgICAvLyBFeHBlY3Q6IENPTlRJTlVFIG90aGVyd2lzZSAod2lsbCBlcnJvciBpZiBncm91cHMgaXMgbm90XG4gICAgICAgIC8vICAgICAgICAgYW4gYXJyYXksIGJ1dCB0aGlzIGlzIGN1cnJlbnQgYmVoYXZpb3IpXG4gICAgICAgIC8vIENhdmVhdDogU1RSSU5HIChpZiB2YWxpZCkgd2lsbCBwYXNzIHN1Y2Nlc3NmdWxseVxuICAgICAgICAvLyAgICAgICAgIGJ1ZyBnaXZlIHVuZXhwZWN0ZWQgcmVzdWx0c1xuICAgICAgICAvLyBJbmZvOiBDYW5ub3QgdXNlIGA9PSBmYWxzZSB0byBjaGVjayBmYWxzZXkgdmFsdWVzYFxuICAgICAgICBpZiAoISFncm91cHMgJiYgZ3JvdXBzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgIC8vIFRPRE86IGNyZWF0ZSBhIGJldHRlciB1bmRlcnN0YW5kaW5nIG9mIGV4cGVjdGF0aW9uc1xuICAgICAgICAgIGlmIChfLmlzU3RyaW5nKGdyb3VwcykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3BsdWdpbiBncm91cCBlcnJvcjogaW52YWxpZCB0eXBlIGZvciBmdW5jdGlvbicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBpc0dyb3VwVmFsaWQ6IGJvb2xlYW4gPSBfLmlzQXJyYXkoZ3JvdXBzKTtcbiAgICAgICAgICBpZiAoIWlzR3JvdXBWYWxpZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihBUElfRVJST1IuQkFEX0ZPUk1BVF9VU0VSX0dST1VQKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVidWcoJ2F1dGhlbnRpY2F0aW9uIGZvciB1c2VyICVvIHdhcyBzdWNjZXNzZnVsbHkuIEdyb3VwczogJW8nLCB1c2VybmFtZSwgZ3JvdXBzKTtcbiAgICAgICAgICByZXR1cm4gY2IoZXJyLCBjcmVhdGVSZW1vdGVVc2VyKHVzZXJuYW1lLCBncm91cHMpKTtcbiAgICAgICAgfVxuICAgICAgICBuZXh0KCk7XG4gICAgICB9KTtcbiAgICB9KSgpO1xuICB9XG5cbiAgcHVibGljIGFkZF91c2VyKHVzZXI6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZywgY2I6IENhbGxiYWNrKTogdm9pZCB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgY29uc3QgcGx1Z2lucyA9IHRoaXMucGx1Z2lucy5zbGljZSgwKTtcbiAgICBkZWJ1ZygnYWRkIHVzZXIgJW8nLCB1c2VyKTtcbiAgICAoZnVuY3Rpb24gbmV4dCgpOiB2b2lkIHtcbiAgICAgIGNvbnN0IHBsdWdpbiA9IHBsdWdpbnMuc2hpZnQoKSBhcyBwbHVnaW5VdGlscy5BdXRoPENvbmZpZz47XG4gICAgICBsZXQgbWV0aG9kID0gJ2FkZHVzZXInO1xuICAgICAgaWYgKF8uaXNGdW5jdGlvbihwbHVnaW5bbWV0aG9kXSkgPT09IGZhbHNlKSB7XG4gICAgICAgIG1ldGhvZCA9ICdhZGRfdXNlcic7XG4gICAgICAgIHNlbGYubG9nZ2VyLndhcm4oXG4gICAgICAgICAgJ3RoZSBwbHVnaW4gbWV0aG9kIGFkZF91c2VyIGluIHRoZSBhdXRoIHBsdWdpbiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gbmV4dCBtYWpvciByZWxlYXNlLCBub3RpZnkgdG8gdGhlIHBsdWdpbiBhdXRob3InXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmIChfLmlzRnVuY3Rpb24ocGx1Z2luW21ldGhvZF0pID09PSBmYWxzZSkge1xuICAgICAgICBuZXh0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBwLmFkZF91c2VyKCkgZXhlY3V0aW9uXG4gICAgICAgIHBsdWdpblttZXRob2RdKHVzZXIsIHBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyLCBvayk6IHZvaWQge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHNlbGYubG9nZ2VyLmVycm9yKFxuICAgICAgICAgICAgICB7IHVzZXIsIGVycjogZXJyLm1lc3NhZ2UgfSxcbiAgICAgICAgICAgICAgJ3RoZSB1c2VyIEB7dXNlcn0gY291bGQgbm90IGJlaW5nIGFkZGVkLiBFcnJvcjogQHtlcnJ9J1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBjYihlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAob2spIHtcbiAgICAgICAgICAgIHNlbGYubG9nZ2VyLmluZm8oeyB1c2VyIH0sICd0aGUgdXNlciBAe3VzZXJ9IGhhcyBiZWVuIGFkZGVkJyk7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5hdXRoZW50aWNhdGUodXNlciwgcGFzc3dvcmQsIGNiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFsbG93IHVzZXIgdG8gYWNjZXNzIGEgcGFja2FnZS5cbiAgICovXG4gIHB1YmxpYyBhbGxvd19hY2Nlc3MoXG4gICAgeyBwYWNrYWdlTmFtZSwgcGFja2FnZVZlcnNpb24gfTogcGx1Z2luVXRpbHMuQXV0aFBsdWdpblBhY2thZ2UsXG4gICAgdXNlcjogUmVtb3RlVXNlcixcbiAgICBjYWxsYmFjazogQ2FsbGJhY2tcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgcGx1Z2lucyA9IHRoaXMucGx1Z2lucy5zbGljZSgwKTtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBjb25zdCBwa2dBbGxvd0FjY2VzOiBBbGxvd0FjY2VzcyA9IHsgbmFtZTogcGFja2FnZU5hbWUsIHZlcnNpb246IHBhY2thZ2VWZXJzaW9uIH07XG4gICAgY29uc3QgcGtnID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIHt9LFxuICAgICAgcGtnQWxsb3dBY2NlcyxcbiAgICAgIGdldE1hdGNoZWRQYWNrYWdlc1NwZWMocGFja2FnZU5hbWUsIHRoaXMuY29uZmlnLnBhY2thZ2VzKVxuICAgICkgYXMgQWxsb3dBY2Nlc3MgJiBQYWNrYWdlQWNjZXNzO1xuICAgIGRlYnVnKCdhbGxvdyBhY2Nlc3MgZm9yICVvJywgcGFja2FnZU5hbWUpO1xuXG4gICAgKGZ1bmN0aW9uIG5leHQoKTogdm9pZCB7XG4gICAgICBjb25zdCBwbHVnaW46IHBsdWdpblV0aWxzLkF1dGg8dW5rbm93bj4gPSBwbHVnaW5zLnNoaWZ0KCkgYXMgcGx1Z2luVXRpbHMuQXV0aDxDb25maWc+O1xuXG4gICAgICBpZiAoXy5pc05pbChwbHVnaW4pIHx8IF8uaXNGdW5jdGlvbihwbHVnaW4uYWxsb3dfYWNjZXNzKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICAgIH1cblxuICAgICAgcGx1Z2luLmFsbG93X2FjY2VzcyEodXNlciwgcGtnLCBmdW5jdGlvbiAoZXJyOiBWZXJkYWNjaW9FcnJvciB8IG51bGwsIG9rPzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgc2VsZi5sb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICB7IHBhY2thZ2VOYW1lLCBlcnIgfSxcbiAgICAgICAgICAgICdmb3JiaWRkZW4gYWNjZXNzIGZvciBAe3BhY2thZ2VOYW1lfS4gRXJyb3I6IEB7ZXJyLm1lc3NhZ2V9J1xuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob2spIHtcbiAgICAgICAgICBzZWxmLmxvZ2dlci5pbmZvKHsgcGFja2FnZU5hbWUgfSwgJ2FsbG93ZWQgYWNjZXNzIGZvciBAe3BhY2thZ2VOYW1lfScpO1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBvayk7XG4gICAgICAgIH1cblxuICAgICAgICBuZXh0KCk7IC8vIGNiKG51bGwsIGZhbHNlKSBjYXVzZXMgbmV4dCBwbHVnaW4gdG8gcm9sbFxuICAgICAgfSk7XG4gICAgfSkoKTtcbiAgfVxuXG4gIHB1YmxpYyBhbGxvd191bnB1Ymxpc2goXG4gICAgeyBwYWNrYWdlTmFtZSwgcGFja2FnZVZlcnNpb24gfTogcGx1Z2luVXRpbHMuQXV0aFBsdWdpblBhY2thZ2UsXG4gICAgdXNlcjogUmVtb3RlVXNlcixcbiAgICBjYWxsYmFjazogQ2FsbGJhY2tcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgcGtnID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIHsgbmFtZTogcGFja2FnZU5hbWUsIHZlcnNpb246IHBhY2thZ2VWZXJzaW9uIH0sXG4gICAgICBnZXRNYXRjaGVkUGFja2FnZXNTcGVjKHBhY2thZ2VOYW1lLCB0aGlzLmNvbmZpZy5wYWNrYWdlcylcbiAgICApO1xuICAgIGRlYnVnKCdhbGxvdyB1bnB1Ymxpc2ggZm9yICVvJywgcGFja2FnZU5hbWUpO1xuICAgIGZvciAoY29uc3QgcGx1Z2luIG9mIHRoaXMucGx1Z2lucykge1xuICAgICAgaWYgKF8uaXNOaWwocGx1Z2luKSB8fCBfLmlzRnVuY3Rpb24ocGx1Z2luLmFsbG93X3VucHVibGlzaCkgPT09IGZhbHNlKSB7XG4gICAgICAgIGRlYnVnKCdhbGxvdyB1bnB1Ymxpc2ggZm9yICVvIHBsdWdpbiBkb2VzIG5vdCBpbXBsZW1lbnQgYWxsb3dfdW5wdWJsaXNoJywgcGFja2FnZU5hbWUpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcGx1Z2luLmFsbG93X3VucHVibGlzaCEodXNlciwgcGtnLCAoZXJyLCBvazogYm9vbGVhbik6IHZvaWQgPT4ge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFxuICAgICAgICAgICAgICB7IHBhY2thZ2VOYW1lLCB1c2VyOiB1c2VyPy5uYW1lIH0sXG4gICAgICAgICAgICAgICdAe3VzZXJ9IGZvcmJpZGRlbiBwdWJsaXNoIGZvciBAe3BhY2thZ2VOYW1lfSwgaXQgd2lsbCBmYWxsYmFjayBvbiB1bnB1Ymxpc2ggcGVybWlzc2lvbnMnXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKF8uaXNOaWwob2spID09PSB0cnVlKSB7XG4gICAgICAgICAgICBkZWJ1Zygnd2UgYnlwYXNzIHVucHVibGlzaCBmb3IgJW8sIHB1Ymxpc2ggd2lsbCBoYW5kbGUgdGhlIGFjY2VzcycsIHBhY2thZ2VOYW1lKTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWxsb3dfcHVibGlzaCguLi5hcmd1bWVudHMpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChvaykge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgeyBwYWNrYWdlTmFtZSwgdXNlcjogdXNlcj8ubmFtZSB9LFxuICAgICAgICAgICAgICAnQHt1c2VyfSBhbGxvd2VkIHVucHVibGlzaCBmb3IgQHtwYWNrYWdlTmFtZX0nXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIG9rKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbGxvdyB1c2VyIHRvIHB1Ymxpc2ggYSBwYWNrYWdlLlxuICAgKi9cbiAgcHVibGljIGFsbG93X3B1Ymxpc2goXG4gICAgeyBwYWNrYWdlTmFtZSwgcGFja2FnZVZlcnNpb24gfTogcGx1Z2luVXRpbHMuQXV0aFBsdWdpblBhY2thZ2UsXG4gICAgdXNlcjogUmVtb3RlVXNlcixcbiAgICBjYWxsYmFjazogQ2FsbGJhY2tcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgcGx1Z2lucyA9IHRoaXMucGx1Z2lucy5zbGljZSgwKTtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBjb25zdCBwa2cgPSBPYmplY3QuYXNzaWduKFxuICAgICAgeyBuYW1lOiBwYWNrYWdlTmFtZSwgdmVyc2lvbjogcGFja2FnZVZlcnNpb24gfSxcbiAgICAgIGdldE1hdGNoZWRQYWNrYWdlc1NwZWMocGFja2FnZU5hbWUsIHRoaXMuY29uZmlnLnBhY2thZ2VzKVxuICAgICk7XG4gICAgZGVidWcoJ2FsbG93IHB1Ymxpc2ggZm9yICVvIGluaXQgfCBwbHVnaW5zOiAlbycsIHBhY2thZ2VOYW1lLCBwbHVnaW5zPy5sZW5ndGgpO1xuICAgIChmdW5jdGlvbiBuZXh0KCk6IHZvaWQge1xuICAgICAgY29uc3QgcGx1Z2luID0gcGx1Z2lucy5zaGlmdCgpO1xuXG4gICAgICBpZiAoXy5pc05pbChwbHVnaW4pIHx8IF8uaXNGdW5jdGlvbihwbHVnaW4uYWxsb3dfcHVibGlzaCkgPT09IGZhbHNlKSB7XG4gICAgICAgIGRlYnVnKCdhbGxvdyBwdWJsaXNoIGZvciAlbyBwbHVnaW4gZG9lcyBub3QgaW1wbGVtZW50IGFsbG93X3B1Ymxpc2gnLCBwYWNrYWdlTmFtZSk7XG4gICAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHBsdWdpbi5hbGxvd19wdWJsaXNoKHVzZXIsIHBrZywgKGVycjogYW55LCBvazogYm9vbGVhbik6IHZvaWQgPT4ge1xuICAgICAgICBpZiAoXy5pc05pbChlcnIpID09PSBmYWxzZSAmJiBfLmlzRXJyb3IoZXJyKSkge1xuICAgICAgICAgIHNlbGYubG9nZ2VyLmVycm9yKFxuICAgICAgICAgICAgeyBwYWNrYWdlTmFtZSwgdXNlcjogdXNlcj8ubmFtZSB9LFxuICAgICAgICAgICAgJ0B7dXNlcn0gaXMgZm9yYmlkZGVuIHB1Ymxpc2ggZm9yIEB7cGFja2FnZU5hbWV9J1xuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob2spIHtcbiAgICAgICAgICBzZWxmLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgeyBwYWNrYWdlTmFtZSwgdXNlcjogdXNlcj8ubmFtZSB9LFxuICAgICAgICAgICAgJ0B7dXNlcn0gaXMgYWxsb3dlZCBwdWJsaXNoIGZvciBAe3BhY2thZ2VOYW1lfSdcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBvayk7XG4gICAgICAgIH1cbiAgICAgICAgZGVidWcoJ2FsbG93IHB1Ymxpc2ggc2tpcCB2YWxpZGF0aW9uIGZvciAlbycsIHBhY2thZ2VOYW1lKTtcbiAgICAgICAgbmV4dCgpOyAvLyBjYihudWxsLCBmYWxzZSkgY2F1c2VzIG5leHQgcGx1Z2luIHRvIHJvbGxcbiAgICAgIH0pO1xuICAgIH0pKCk7XG4gIH1cblxuICBwdWJsaWMgYXBpSldUbWlkZGxld2FyZSgpIHtcbiAgICBjb25zdCBwbHVnaW5zID0gdGhpcy5wbHVnaW5zLnNsaWNlKDApO1xuICAgIGNvbnN0IGhlbHBlcnMgPSB7IGNyZWF0ZUFub255bW91c1JlbW90ZVVzZXIsIGNyZWF0ZVJlbW90ZVVzZXIgfTtcbiAgICBmb3IgKGNvbnN0IHBsdWdpbiBvZiBwbHVnaW5zKSB7XG4gICAgICBpZiAocGx1Z2luLmFwaUpXVG1pZGRsZXdhcmUpIHtcbiAgICAgICAgcmV0dXJuIHBsdWdpbi5hcGlKV1RtaWRkbGV3YXJlKGhlbHBlcnMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAocmVxOiAkUmVxdWVzdEV4dGVuZCwgcmVzOiAkUmVzcG9uc2VFeHRlbmQsIF9uZXh0OiBOZXh0RnVuY3Rpb24pOiB2b2lkID0+IHtcbiAgICAgIHJlcS5wYXVzZSgpO1xuXG4gICAgICBjb25zdCBuZXh0ID0gZnVuY3Rpb24gKGVycjogYW55IHwgdm9pZCk6IHZvaWQge1xuICAgICAgICByZXEucmVzdW1lKCk7XG4gICAgICAgIC8vIHVuY29tbWVudCB0aGlzIHRvIHJlamVjdCB1c2VycyB3aXRoIGJhZCBhdXRoIGhlYWRlcnNcbiAgICAgICAgLy8gcmV0dXJuIF9uZXh0LmFwcGx5KG51bGwsIGFyZ3VtZW50cylcbiAgICAgICAgLy8gc3dhbGxvdyBlcnJvciwgdXNlciByZW1haW5zIHVuYXV0aG9yaXplZFxuICAgICAgICAvLyBzZXQgcmVtb3RlVXNlckVycm9yIHRvIGluZGljYXRlIHRoYXQgdXNlciB3YXMgYXR0ZW1wdGluZyBhdXRoZW50aWNhdGlvblxuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmVxLnJlbW90ZV91c2VyLmVycm9yID0gZXJyLm1lc3NhZ2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9uZXh0KCk7XG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5faXNSZW1vdGVVc2VyVmFsaWQocmVxLnJlbW90ZV91c2VyKSkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIC8vIGluIGNhc2UgYXV0aCBoZWFkZXIgZG9lcyBub3QgZXhpc3Qgd2UgcmV0dXJuIGFub255bW91cyBmdW5jdGlvblxuICAgICAgcmVxLnJlbW90ZV91c2VyID0gY3JlYXRlQW5vbnltb3VzUmVtb3RlVXNlcigpO1xuXG4gICAgICBjb25zdCB7IGF1dGhvcml6YXRpb24gfSA9IHJlcS5oZWFkZXJzO1xuICAgICAgaWYgKF8uaXNOaWwoYXV0aG9yaXphdGlvbikpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICByZXR1cm4gbmV4dCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzQXV0aEhlYWRlclZhbGlkKGF1dGhvcml6YXRpb24pKSB7XG4gICAgICAgIGRlYnVnKCdhcGkgbWlkZGxld2FyZSBhdXRoIGhlYXRoZXIgaXMgbm90IHZhbGlkJyk7XG4gICAgICAgIHJldHVybiBuZXh0KEVycm9yQ29kZS5nZXRCYWRSZXF1ZXN0KEFQSV9FUlJPUi5CQURfQVVUSF9IRUFERVIpKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2VjdXJpdHk6IFNlY3VyaXR5ID0gZ2V0U2VjdXJpdHkodGhpcy5jb25maWcpO1xuICAgICAgY29uc3QgeyBzZWNyZXQgfSA9IHRoaXMuY29uZmlnO1xuXG4gICAgICBpZiAoaXNBRVNMZWdhY3koc2VjdXJpdHkpKSB7XG4gICAgICAgIGRlYnVnKCdhcGkgbWlkZGxld2FyZSB1c2luZyBsZWdhY3kgYXV0aCB0b2tlbicpO1xuICAgICAgICB0aGlzLl9oYW5kbGVBRVNNaWRkbGV3YXJlKHJlcSwgc2VjdXJpdHksIHNlY3JldCwgYXV0aG9yaXphdGlvbiwgbmV4dCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1ZygnYXBpIG1pZGRsZXdhcmUgdXNpbmcgSldUIGF1dGggdG9rZW4nKTtcbiAgICAgICAgdGhpcy5faGFuZGxlSldUQVBJTWlkZGxld2FyZShyZXEsIHNlY3VyaXR5LCBzZWNyZXQsIGF1dGhvcml6YXRpb24sIG5leHQpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVKV1RBUElNaWRkbGV3YXJlKFxuICAgIHJlcTogJFJlcXVlc3RFeHRlbmQsXG4gICAgc2VjdXJpdHk6IFNlY3VyaXR5LFxuICAgIHNlY3JldDogc3RyaW5nLFxuICAgIGF1dGhvcml6YXRpb246IHN0cmluZyxcbiAgICBuZXh0OiBGdW5jdGlvblxuICApOiB2b2lkIHtcbiAgICBjb25zdCB7IHNjaGVtZSwgdG9rZW4gfSA9IHBhcnNlQXV0aFRva2VuSGVhZGVyKGF1dGhvcml6YXRpb24pO1xuICAgIGlmIChzY2hlbWUudG9VcHBlckNhc2UoKSA9PT0gVE9LRU5fQkFTSUMudG9VcHBlckNhc2UoKSkge1xuICAgICAgLy8gdGhpcyBzaG91bGQgaGFwcGVuIHdoZW4gY2xpZW50IHRyaWVzIHRvIGxvZ2luIHdpdGggYW4gZXhpc3RpbmcgdXNlclxuICAgICAgY29uc3QgY3JlZGVudGlhbHMgPSBjb252ZXJ0UGF5bG9hZFRvQmFzZTY0KHRva2VuKS50b1N0cmluZygpO1xuICAgICAgY29uc3QgeyB1c2VyLCBwYXNzd29yZCB9ID0gcGFyc2VCYXNpY1BheWxvYWQoY3JlZGVudGlhbHMpIGFzIEFFU1BheWxvYWQ7XG4gICAgICB0aGlzLmF1dGhlbnRpY2F0ZSh1c2VyLCBwYXNzd29yZCwgKGVyciwgdXNlcik6IHZvaWQgPT4ge1xuICAgICAgICBpZiAoIWVycikge1xuICAgICAgICAgIHJlcS5yZW1vdGVfdXNlciA9IHVzZXI7XG4gICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcS5yZW1vdGVfdXNlciA9IGNyZWF0ZUFub255bW91c1JlbW90ZVVzZXIoKTtcbiAgICAgICAgICBuZXh0KGVycik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBqd3QgaGFuZGxlclxuICAgICAgY29uc3QgY3JlZGVudGlhbHM6IGFueSA9IGdldE1pZGRsZXdhcmVDcmVkZW50aWFscyhzZWN1cml0eSwgc2VjcmV0LCBhdXRob3JpemF0aW9uKTtcbiAgICAgIGlmIChjcmVkZW50aWFscykge1xuICAgICAgICAvLyBpZiB0aGUgc2lnbmF0dXJlIGlzIHZhbGlkIHdlIHJlbHkgb24gaXRcbiAgICAgICAgcmVxLnJlbW90ZV91c2VyID0gY3JlZGVudGlhbHM7XG4gICAgICAgIG5leHQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHdpdGggSldUIHRocm93IDQwMVxuICAgICAgICBuZXh0KEVycm9yQ29kZS5nZXRGb3JiaWRkZW4oQVBJX0VSUk9SLkJBRF9VU0VSTkFNRV9QQVNTV09SRCkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZUFFU01pZGRsZXdhcmUoXG4gICAgcmVxOiAkUmVxdWVzdEV4dGVuZCxcbiAgICBzZWN1cml0eTogU2VjdXJpdHksXG4gICAgc2VjcmV0OiBzdHJpbmcsXG4gICAgYXV0aG9yaXphdGlvbjogc3RyaW5nLFxuICAgIG5leHQ6IEZ1bmN0aW9uXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IGNyZWRlbnRpYWxzOiBhbnkgPSBnZXRNaWRkbGV3YXJlQ3JlZGVudGlhbHMoc2VjdXJpdHksIHNlY3JldCwgYXV0aG9yaXphdGlvbik7XG4gICAgaWYgKGNyZWRlbnRpYWxzKSB7XG4gICAgICBjb25zdCB7IHVzZXIsIHBhc3N3b3JkIH0gPSBjcmVkZW50aWFscztcbiAgICAgIHRoaXMuYXV0aGVudGljYXRlKHVzZXIsIHBhc3N3b3JkLCAoZXJyLCB1c2VyKTogdm9pZCA9PiB7XG4gICAgICAgIGlmICghZXJyKSB7XG4gICAgICAgICAgcmVxLnJlbW90ZV91c2VyID0gdXNlcjtcbiAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVxLnJlbW90ZV91c2VyID0gY3JlYXRlQW5vbnltb3VzUmVtb3RlVXNlcigpO1xuICAgICAgICAgIG5leHQoZXJyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHdlIGZvcmNlIG5wbSBjbGllbnQgdG8gYXNrIGFnYWluIHdpdGggYmFzaWMgYXV0aGVudGljYXRpb25cbiAgICAgIHJldHVybiBuZXh0KEVycm9yQ29kZS5nZXRCYWRSZXF1ZXN0KEFQSV9FUlJPUi5CQURfQVVUSF9IRUFERVIpKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9pc1JlbW90ZVVzZXJWYWxpZChyZW1vdGVfdXNlcjogUmVtb3RlVXNlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBfLmlzVW5kZWZpbmVkKHJlbW90ZV91c2VyKSA9PT0gZmFsc2UgJiYgXy5pc1VuZGVmaW5lZChyZW1vdGVfdXNlci5uYW1lKSA9PT0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogSldUIG1pZGRsZXdhcmUgZm9yIFdlYlVJXG4gICAqL1xuICBwdWJsaWMgd2ViVUlKV1RtaWRkbGV3YXJlKCk6IEZ1bmN0aW9uIHtcbiAgICByZXR1cm4gKHJlcTogJFJlcXVlc3RFeHRlbmQsIHJlczogJFJlc3BvbnNlRXh0ZW5kLCBfbmV4dDogTmV4dEZ1bmN0aW9uKTogdm9pZCA9PiB7XG4gICAgICBpZiAodGhpcy5faXNSZW1vdGVVc2VyVmFsaWQocmVxLnJlbW90ZV91c2VyKSkge1xuICAgICAgICByZXR1cm4gX25leHQoKTtcbiAgICAgIH1cblxuICAgICAgcmVxLnBhdXNlKCk7XG4gICAgICBjb25zdCBuZXh0ID0gKGVycjogYW55IHwgdm9pZCk6IHZvaWQgPT4ge1xuICAgICAgICByZXEucmVzdW1lKCk7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAvLyByZXEucmVtb3RlX3VzZXIuZXJyb3IgPSBlcnIubWVzc2FnZTtcbiAgICAgICAgICByZXMuc3RhdHVzKGVyci5zdGF0dXNDb2RlKS5zZW5kKGVyci5tZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfbmV4dCgpO1xuICAgICAgfTtcblxuICAgICAgY29uc3QgeyBhdXRob3JpemF0aW9uIH0gPSByZXEuaGVhZGVycztcbiAgICAgIGlmIChfLmlzTmlsKGF1dGhvcml6YXRpb24pKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc0F1dGhIZWFkZXJWYWxpZChhdXRob3JpemF0aW9uKSkge1xuICAgICAgICByZXR1cm4gbmV4dChFcnJvckNvZGUuZ2V0QmFkUmVxdWVzdChBUElfRVJST1IuQkFEX0FVVEhfSEVBREVSKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRva2VuID0gKGF1dGhvcml6YXRpb24gfHwgJycpLnJlcGxhY2UoYCR7VE9LRU5fQkVBUkVSfSBgLCAnJyk7XG4gICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICAgIH1cblxuICAgICAgbGV0IGNyZWRlbnRpYWxzO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY3JlZGVudGlhbHMgPSB2ZXJpZnlKV1RQYXlsb2FkKHRva2VuLCB0aGlzLmNvbmZpZy5zZWNyZXQpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIEZJWE1FOiBpbnRlbmRlZCBiZWhhdmlvdXIsIGRvIHdlIHdhbnQgaXQ/XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9pc1JlbW90ZVVzZXJWYWxpZChjcmVkZW50aWFscykpIHtcbiAgICAgICAgY29uc3QgeyBuYW1lLCBncm91cHMgfSA9IGNyZWRlbnRpYWxzO1xuICAgICAgICByZXEucmVtb3RlX3VzZXIgPSBjcmVhdGVSZW1vdGVVc2VyKG5hbWUsIGdyb3Vwcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXEucmVtb3RlX3VzZXIgPSBjcmVhdGVBbm9ueW1vdXNSZW1vdGVVc2VyKCk7XG4gICAgICB9XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBuZXh0KCk7XG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBqd3RFbmNyeXB0KHVzZXI6IFJlbW90ZVVzZXIsIHNpZ25PcHRpb25zOiBKV1RTaWduT3B0aW9ucyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgeyByZWFsX2dyb3VwcywgbmFtZSwgZ3JvdXBzIH0gPSB1c2VyO1xuICAgIGNvbnN0IHJlYWxHcm91cHNWYWxpZGF0ZWQgPSBfLmlzTmlsKHJlYWxfZ3JvdXBzKSA/IFtdIDogcmVhbF9ncm91cHM7XG4gICAgY29uc3QgZ3JvdXBlZEdyb3VwcyA9IF8uaXNOaWwoZ3JvdXBzKVxuICAgICAgPyByZWFsX2dyb3Vwc1xuICAgICAgOiBBcnJheS5mcm9tKG5ldyBTZXQoWy4uLmdyb3Vwcy5jb25jYXQocmVhbEdyb3Vwc1ZhbGlkYXRlZCldKSk7XG4gICAgY29uc3QgcGF5bG9hZDogUmVtb3RlVXNlciA9IHtcbiAgICAgIHJlYWxfZ3JvdXBzOiByZWFsR3JvdXBzVmFsaWRhdGVkLFxuICAgICAgbmFtZSxcbiAgICAgIGdyb3VwczogZ3JvdXBlZEdyb3VwcyxcbiAgICB9O1xuXG4gICAgLy8gVE9ETzogZml4IG9uIHVwZGF0ZSBzaWduYXR1cmUgcGFja2FnZVxuICAgIGNvbnN0IHRva2VuOiBzdHJpbmcgPSBhd2FpdCBzaWduUGF5bG9hZChwYXlsb2FkLCB0aGlzLnNlY3JldCwgc2lnbk9wdGlvbnMgYXMgYW55KTtcblxuICAgIHJldHVybiB0b2tlbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmNyeXB0IGEgc3RyaW5nLlxuICAgKi9cbiAgcHVibGljIGFlc0VuY3J5cHQodmFsdWU6IHN0cmluZyk6IHN0cmluZyB8IHZvaWQge1xuICAgIGlmICh0aGlzLnNlY3JldC5sZW5ndGggPT09IHNpZ25hdHVyZVV0aWxzLlRPS0VOX1ZBTElEX0xFTkdUSCkge1xuICAgICAgZGVidWcoJ3NpZ25pbmcgd2l0aCBlbmhhbmNlZCBhZXMgbGVnYWN5Jyk7XG4gICAgICBjb25zdCB0b2tlbiA9IGFlc0VuY3J5cHQodmFsdWUsIHRoaXMuc2VjcmV0KTtcbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWcoJ3NpZ25pbmcgd2l0aCBlbmhhbmNlZCBhZXMgZGVwcmVjYXRlZCBsZWdhY3knKTtcbiAgICAgIC8vIGRlcHJlY2F0ZWQgYWVzIChsZWdhY3kpIHNpZ25hdHVyZSwgb25seSBtdXN0IGJlIHVzZWQgZm9yIGxlZ2FjeSB2ZXJzaW9uXG4gICAgICBjb25zdCB0b2tlbiA9IGFlc0VuY3J5cHREZXByZWNhdGVkKEJ1ZmZlci5mcm9tKHZhbHVlKSwgdGhpcy5zZWNyZXQpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXV0aDtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBRUEsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBRUEsSUFBQUUsS0FBQSxHQUFBRixPQUFBO0FBT0EsSUFBQUcsT0FBQSxHQUFBSCxPQUFBO0FBRUEsSUFBQUksVUFBQSxHQUFBSixPQUFBO0FBaUJBLElBQUFLLE1BQUEsR0FBQUwsT0FBQTtBQUVBLElBQUFNLGFBQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUFPLFVBQUEsR0FBQVAsT0FBQTtBQUNBLElBQUFRLFVBQUEsR0FBQVIsT0FBQTtBQUNBLElBQUFTLE9BQUEsR0FBQVQsT0FBQTtBQUNBLElBQUFVLE9BQUEsR0FBQVYsT0FB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